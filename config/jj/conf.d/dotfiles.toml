"$schema" = "https://jj-vcs.github.io/jj/latest/config-schema.json"

[template-aliases]
"format_timestamp(timestamp)" = "timestamp.ago()"

[ui]
default-command = "st"
diff-editor = ":builtin"

[aliases]
l = ["log"]
bl = ["bookmark", "list"]
tug = ["bookmark", "move", "--from", "heads(::@- & bookmarks())", "--to", "@-"]
fetch = ["git", "fetch"]
push = ["util", "exec", "--", "bash", "-c", """
    set -e
    if [ -f .pre-commit-config.yaml ]; then
        pre-commit run -a
    fi
    jj git push "$@"
""", ""]
wc = ["log", "--stat"]

[fix.tools.1-ruff-lint]
command = ["uvx", "ruff", "check", "--fix", "--quiet", "--stdin-filename=$path", "-"]
patterns = ["glob:'**/*.py'"]

[fix.tools.2-ruff-format]
command = ["uvx", "ruff", "format", "--stdin-filename=$path", "-"]
patterns = ["glob:'**/*.py'"]

[fix.tools.3-terraform-fmt]
command = ["terraform", "fmt", "-"]
patterns = ["glob:'**/*.tf'"]

[fix.tools.4-shfmt]
command = ["shfmt"]
patterns = ["glob:'**/*.sh'"]
